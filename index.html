<!DOCTYPE html>
<meta charset="utf8"/>
<html>
	<head>
		<title>Pepper vs Goblin</title>
		<style>
			body {
				background-color: #000000;
				color: #FFFFFF;
				margin: 0;
				padding: 0;
				overflow: auto;
				scrollbar-width: none; /* Firefox */
				-ms-overflow-style: none; /* IE and Edge */
			}
			body::-webkit-scrollbar {
				display: none; /* Chrome, Safari, Opera */
			}
			canvas {
				border: 1px solid #FFFFFF;
				display: block;
				image-rendering: pixelated;
				/*cursor: none;*/
			}
			.hidden {
				display: none;
			}
			#pep, #enemy {
				display: none;
			}
			#main-container {
				display: flex;
			}
			#left-section {
				display: flex;
				flex-direction: column;
			}
			#canvas-container {
				position: relative;
				display: inline-block;
			}
			#controls-row {
				display: flex;
				gap: 10px;
				margin-top: 10px;
			}
			#controls {
				display: flex;
				gap: 10px;
			}
			#sidebar {
				width: calc(20vw);
				min-width: 15vw;
				padding: 10px;
				border: 1px solid #FFFFFF;
				overflow-y: auto;
				display: flex;
				flex-direction: column;
			}
			#sidebar h3 {
				margin-top: 0;
			}
			#log {
				overflow-x: auto;
				overflow-y: auto;
				padding: 10px;
				width: calc(25vw);
				max-height: calc(50vh - 200px);
			}
			.turn-entity {
				padding: 5px;
				margin: 5px 0;
				border: 1px solid #FFFFFF;
				position: relative;
			}
			.turn-entity.active {
				color: #FF0000;
				font-weight: bold;
			}
			fieldset {
				border: 1px solid #fff;
				padding: 5px;
				margin: 0;
			}
			.equipment-item {
				padding: 5px;
				margin: 3px 0;
				border: 1px solid #0f0;
				background-color: #002200;
				cursor: pointer;
			}
			.equipment-item:hover {
				background-color: #003300;
			}
			#size-input-container {
				display: none;
				margin-right: 10px;
			}
			.peek-button {
				background-color: #444;
				color: #888;
				border: 1px solid #666;
				padding: 5px 10px;
				cursor: not-allowed;
			}
			.peek-button.active {
				background-color: #006600;
				color: #FFFFFF;
				border: 1px solid #00FF00;
				cursor: pointer;
			}
			.peek-button.active:hover {
				background-color: #008800;
			}
		</style>
	</head>
	<body>
		<img id="pep" src="pep.png"></img>
		<img id="enemy" src="enemy.png"></img>
		<audio src="sound.wav"></audio>
		<div class="hidden" id="content">
			<div id="main-container">
				<div id="left-section">
					<div style="display: flex; gap: 10px;">
						<div>
							<div id="canvas-container">
								<canvas id="canvas"></canvas>
							</div>
							<div style="display: flex; gap: 5px; margin-top: 5px;">
								<select id="actions" onchange="update()" style="flex: 1;">
									<option value="move">MOVE</option>
									<option value="attack">ATTK</option>
								</select>
								<button id="peek-button" class="peek-button" onclick="activatePeekMode()">PEEK</button>
							</div>
						</div>
						<div id="sidebar">
							<fieldset style="width: auto; overflow-y:auto; margin-bottom: 10px; flex: 1;">
								<legend>EQUIPMENT</legend>
								<div id="equipment-items" style="height: 100%; overflow-y: auto;"></div>
							</fieldset>
							<fieldset style="width: auto; overflow-y:auto; flex: 1;">
								<legend>INVENTORY</legend>
								<div id="inventory-items" style="height: 100%; overflow-y: auto;"></div>
							</fieldset>
						</div>

					</div>
					<div style="margin-top: 10px;">
						<span id="size-input-container">
							<label>SIZE: <input type="number" id="map-size" min="5" max="100" style="width: 60px;" onchange="updateMapSize()" onkeydown="if(event.keyCode === 13) updateMapSize()"></label>
						</span>
						EDIT MODE:<input type="checkbox" id="edit"></input>
						<a href="" id="save_button"><button onclick="save_map()">SAVE MAP</button></a>
						<input id="file" type="file" onchange="load_map()"/>
					</div>
					<div id="controls-row">
						<fieldset id="enemy-settings">
							<legend>Enemy Settings</legend>
							<label>Name: <input type="text" id="spawn_name" value="enemy" autocomplete="off" style="width: 80px;"></label><br>
							<label>HP: <input type="number" id="spawn_hp" value="15" autocomplete="off" style="width: 50px;"></label><br>
							<label>X: <input type="number" id="spawn_x" value="2" placeholder="auto" autocomplete="off" style="width: 50px;"></label>
							<label>Y: <input type="number" id="spawn_y" value="2" placeholder="auto" autocomplete="off" style="width: 50px;"></label><br>
							<label>Range: <input type="number" id="spawn_range" value="3" autocomplete="off" style="width: 50px;"></label><br>
							<label>Attack Range: <input type="number" id="spawn_attack_range" value="3" autocomplete="off" style="width: 50px;"></label><br>
							<label>Turns: <input type="number" id="spawn_turns" value="2" autocomplete="off" style="width: 50px;"></label><br>
							<button onclick="spawnEnemy()" style="margin-top: 5px;">SPAWN ENEMY</button>
						</fieldset>
						<fieldset id="player-settings">
							<legend>Player Settings</legend>
							<label>Name: <input type="text" id="player_name" value="player" autocomplete="off" style="width: 80px;"></label><br>
							<label>HP: <input type="number" id="player_hp" value="20" autocomplete="off" style="width: 50px;"></label><br>
							<label>X: <input type="number" id="player_x" value="" placeholder="current" autocomplete="off" style="width: 50px;"></label>
							<label>Y: <input type="number" id="player_y" value="" placeholder="current" autocomplete="off" style="width: 50px;"></label><br>
							<label>Range: <input type="number" id="player_range" value="3" autocomplete="off" style="width: 50px;"></label><br>
							<label>Attack Range: <input type="number" id="player_attack_range" value="4" autocomplete="off" style="width: 50px;"></label><br>
							<label>Turns: <input type="number" id="player_turns" value="2" autocomplete="off" style="width: 50px;"></label><br>
							<button onclick="updatePlayer()" style="margin-top: 5px;">UPDATE PLAYER</button>
						</fieldset>
						<fieldset id="item-settings" style="width: auto;">
							<legend>Item Settings</legend>
							<label>Type: 
								<select id="item_category" onchange="updateItemDropdown()" style="width: auto;">
									<option value="consumable">Consumable</option>
									<option value="equipment">Equipment</option>
								</select>
							</label><br>
							<label>Item: 
								<select id="item_type" style="width: auto;">
								</select>
							</label><br>
							<label>X: <input type="number" id="item_x" value="" placeholder="X" autocomplete="off" style="width: 50px;"></label>
							<label>Y: <input type="number" id="item_y" value="" placeholder="Y" autocomplete="off" style="width: 50px;"></label><br>
							<button onclick="spawnItemFromUI()" style="margin-top: 5px;">SPAWN ITEM</button>
						</fieldset>
					</div>
				</div>
				<div id="right-panel" style="max-width: 25vw; min-width: 25vw;">
					<fieldset style="margin-left: 10px; width: auto; overflow-y:auto;">
						<legend>TURN ORDER</legend>
						<div id="turn-order" style="min-height: 50px; max-height: 150px; overflow-y: auto;"></div>
					</fieldset>
					<div id="log"></div>
				</div>
			</div>
				<p><i>Press &lt;TAB&gt; to swap between MOVE & ATTACK modes.<br>
				Press &lt;Arrow Keys&gt; to move the cursor.<br>
				Press &lt;Enter&gt; to select that tile.<br>
				Press &lt; ' &gt;, (Apostrophe) to select items or enemies within your movement or attack ranges respectively.<br>
				Press &lt;P&gt; to enter Peek mode. You can move one tile, attack and move back. Uses 2 action points.<br>
				Press &lt;R&gt; to reload your equipped weapon (uses 1 turn phase).<br><br>
				Press &lt; . &gt;, (Period) to pass your turn, and pick up an item you're standing on.<br>
				Press &lt;Number Keys&gt; to use/equip the cooresponding inventory item.<br>
				L. Click items in inventory to use/equip them.<br>
				R. Click items in inventory to drop them.<br><br>
				Press &lt;SHIFT&gt; to toggle zoom in/out.<br>
				Press &lt;SHIFT+E&gt; to toggle EDIT mode.<br>
				Press &lt;ESC&gt; to exit EDIT mode or PEEK mode.<br>
				R. Click tiles to populate coordinate input fields. (Spawning an item on the player/enemy will put it in their inventory.)<br>
				</i></p>
		</div>
		<script type="text/javascript" src="main.js"></script>
		<script type="text/javascript" src="entity.js"></script>
		<script type="text/javascript" src="items.js"></script>
		<script type="text/javascript" src="io.js"></script>
		<script type="text/javascript" src="los.js"></script>
		<script type="text/javascript" src="astar.js"></script>
		<script type="text/javascript" src="canvas.js"></script>
		<script type="text/javascript" src="input.js"></script>
		<script type="text/javascript" src="turns.js"></script>
		<script type="text/javascript" src="circle.js"></script>
		<script type="text/javascript" src="script.js"></script>
	</body>
</html>
